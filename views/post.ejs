<%- include('partials/header.ejs') %>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@700&family=Roboto:wght@400;500&display=swap"
    rel="stylesheet">
  <style>
    body {
      background: #181c24;
      margin: 0;
      padding: 0;
      color: #eaf6ff;
      font-family: 'Roboto', Arial, sans-serif;
      overflow-x: hidden;
      background-blend-mode: screen;
    }

    #particles-js {
      position: absolute;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .post-bg {
      min-height: 100vh;
      width: 100vw;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      overflow: hidden;
      background: #181c24;
      background-blend-mode: screen;
    }
    .post-flex {
      margin: 32px;
      position: relative;
      z-index: 2;
      width: 100vw;
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .post-container {
      max-width: 650px;
      width: 95vw;
      background: rgba(34, 40, 50, 0.85);
      border-radius: 20px;
      box-shadow: 0 4px 32px #0004;
      padding: 40px 28px 28px 28px;
      border: 1.5px solid #5beb01;
      display: flex;
      flex-direction: column;
      align-items: stretch;
      animation: fadeInUp 1.1s cubic-bezier(.68, -0.55, .27, 1.55);
      backdrop-filter: blur(6px);
    }

    
     
    .glow {
      
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg,
          transparent,
          rgba(0, 255, 8, 0.887),
          rgba(140, 255, 0, 0.202),
          rgba(255, 215, 0, 0.2),
          transparent);
      
    }

    

    @keyframes fadeInUp {
      0% {
        opacity: 0;
        transform: translateY(40px);
      }

      100% {
        opacity: 1;
        transform: none;
      }
    }

    .post-container img {
      width: 100%;
      height: 350px;
    }

    .post-title {
      font-family: "Shadows Into Light", cursive;
      font-size: 3.1rem;
      font-weight: 700;
      color: #72f507;
      margin-bottom: 18px;
      letter-spacing: 1px;
      border-bottom: 2px solid #b7e4c7;
      padding-bottom: 10px;
      width: 100%;
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .post-description {
      font-family: 'Roboto', Arial, sans-serif;
      font-size: 1.13rem;
      color: #eaf6ff;
      margin-top: 22px;
      line-height: 1.7;
      word-break: break-word;
      width: 100%;
      background: rgba(34, 40, 50, 0.98);
      border-radius: 8px;
      padding: 16px 12px;
      box-shadow: 0 1px 6px #2d6a4f22;
      border-left: 3px solid #b7e4c7;
      animation: fadeInUp 1.3s cubic-bezier(.68, -0.55, .27, 1.55);
    }

    .post-back {
      display: inline-block;
      margin-top: 28px;
      color: #b7e4c7;
      font-family: 'Montserrat', Arial, sans-serif;
      text-decoration: none;
      font-size: 1rem;
      transition: color 0.2s, background 0.2s;
      border-bottom: 1px dotted #b7e4c7;
      padding-bottom: 2px;
      background: #222831;
      border-radius: 6px;
      padding: 7px 16px;
      box-shadow: 0 1px 4px #2d6a4f22;
    }

    .post-back:hover {
      color: #2d6a4f;
      border-bottom: 1px solid #b7e4c7;
      text-decoration: underline;
      background: #181c24;
    }

    /* Comment Section Styles */
    .comment-section {
      margin-top: 32px;
      width: 100%;
      background: rgba(34, 40, 50, 0.85);
      border-radius: 12px;
      box-shadow: 0 1px 8px #0002;
      padding: 18px 14px 12px 14px;
      border: 1px solid #b7e4c7;
      animation: fadeInUp 1.2s cubic-bezier(.68, -0.55, .27, 1.55);
    }

    .comment-title {
      font-family: 'Montserrat', Arial, sans-serif;
      color: #b7e4c7;
      font-size: 1.1rem;
      margin-bottom: 14px;
      letter-spacing: 1px;
    }

    .comment-form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-bottom: 14px;
    }

    .comment-input {
      font-family: 'Roboto', Arial, sans-serif;
      font-size: 1rem;
      border-radius: 6px;
      border: 1px solid #b7e4c7;
      padding: 8px;
      background: #222831;
      color: #eaf6ff;
      resize: vertical;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
      box-shadow: 0 1px 4px #2d6a4f22;
    }

    .comment-input:focus {
      border-color: #2d6a4f;
      box-shadow: 0 2px 8px #b7e4c733;
    }

    .comment-btn {
      align-self: flex-end;
      background: #b7e4c7;
      color: #222831;
      font-family: 'Montserrat', Arial, sans-serif;
      font-weight: 700;
      border: none;
      border-radius: 6px;
      padding: 7px 16px;
      cursor: pointer;
      box-shadow: 0 1px 4px #2d6a4f22;
      transition: background 0.2s, color 0.2s, box-shadow 0.2s;
    }

    .comment-btn:hover {
      background: #2d6a4f;
      color: #eaf6ff;
      box-shadow: 0 2px 8px #2d6a4f33;
    }

    .comments-list {
      margin-top: 8px;
      margin-right: 8px;
    }

    .comment-item {
      background: #222831;
      color: #eaf6ff;
      border-radius: 6px;
      padding: 8px 12px;
      margin-bottom: 8px;
      box-shadow: 0 1px 4px #2d6a4f22;
      font-size: 1rem;
      display: flex;
      gap: 8px;
      transition: box-shadow 0.2s, transform 0.2s;
    }

    .comment-item:hover {
      box-shadow: 0 2px 8px #2d6a4f33;
      transform: scale(1.02);
    }

    .comment-user {
      color: #b7e4c7;
      font-weight: 700;
      margin-right: 6px;
    }

    .comment-text {
      color: #eaf6ff;
    }

    .no-comments {
      color: #888;
      font-style: italic;
      margin-top: 6px;
    }

    @media (max-width: 800px) {
      .post-container {
        max-width: 98vw;
        padding: 14px 2vw;
      }

      .post-title {
        font-size: 2.1rem;
        padding-bottom: 6px;
      }

      .post-description {
        font-size: 0.95rem;
        padding: 8px 4px;
      }
    }
  </style>


  <div class="post-bg">
    <!-- <video autoplay loop muted playsinline class="hero-smoke-bg">
      <source src="\Assets\Smoke_7___40s___4k_res.mp4" type="video/mp4" />
    </video> -->
    <div id="particles-js"></div>
    <div class="post-flex">
      <div class="post-container">

        <h1 class="post-title">
          <%= post.title %>
        </h1>

        <img class="card-img" src=<%=post.image_path %>>
        <div style="text-align: center;" class="name"><h2 class="glow"><%= post.name %></h2></div>
        <div style="text-align: center;" ><h2 ><%= post.createdat %></h2></div>

        <div class="post-description"><%- post.description %></div>
        <a href="/" class="post-back">&larr; Back to Home</a>
        <!-- Comment Section Start -->
        <div class="comment-section">
          <h2 class="comment-title">Comments</h2>
          <form class="comment-form" action="/post/<%= postId %>/comment" method="POST">
            <input name="name" class="comment-input" placeholder="Write your name" required maxlength="30">
            <textarea name="comment" class="comment-input" rows="3" placeholder="Add your comment..."></textarea>
            <button type="submit" class="comment-btn">Post Comment</button>
          </form>
          <div class="comments-list">
            <% if (comments && comments.length> 0) { %>
              <% comments.forEach(function(comment) { %>
                <div class="comment-item">
                  <span class="comment-user">
                    <%= comment.name || 'Anonymous' %>:
                  </span>
                  <span class="comment-text">
                    <%= comment.content %>
                  </span>
                </div>
                <% }); %>
                  <% } else { %>
                    <div class="no-comments">No comments yet. Be the first to comment!</div>
                    <% } %>
          </div>
        </div>
        <!-- Comment Section End -->
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <script>
    document.addEventListener('DOMContentLoaded', function () {
      particlesJS('particles-js', {
        "particles": {
          "number": {
            "value": 100,
            "density": {
              "enable": true,
              "value_area": 800
            }
          },
          "color": {
            "value": "#00ff3c"
          },
          "shape": {
            "type": "circle",
            "stroke": {
              "width": 0,
              "color": "#000000"
            },
            "polygon": {
              "nb_sides": 5
            }
          },
          "opacity": {
            "value": 0.8,
            "random": true,
            "anim": {
              "enable": true,
              "speed": 1,
              "opacity_min": 0.4,
              "sync": false
            }
          },
          "size": {
            "value": 5,
            "random": true,
            "anim": {
              "enable": true,
              "speed": 2,
              "size_min": 1,
              "sync": false
            }
          },
          "line_linked": {
            "enable": true,
            "distance": 150,
            "color": "#00ff3c",
            "opacity": 0.6,
            "width": 1.5
          },
          "move": {
            "enable": true,
            "speed": 2,
            "direction": "none",
            "random": true,
            "straight": false,
            "out_mode": "out",
            "bounce": false,
            "attract": {
              "enable": true,
              "rotateX": 600,
              "rotateY": 1200
            }
          }
        },
        "interactivity": {
          "detect_on": "canvas",
          "events": {
            "onhover": {
              "enable": true,
              "mode": "repulse"
            },
            "onclick": {
              "enable": true,
              "mode": "push"
            },
            "resize": true
          },
          "modes": {
            "grab": {
              "distance": 400,
              "line_linked": {
                "opacity": 1
              }
            },
            "bubble": {
              "distance": 400,
              "size": 40,
              "duration": 2,
              "opacity": 8,
              "speed": 3
            },
            "repulse": {
              "distance": 100,
              "duration": 0.4
            },
            "push": {
              "particles_nb": 4
            },
            "remove": {
              "particles_nb": 2
            }
          }
        },
        "retina_detect": true
      });
    });
  </script>
  <%- include('partials/footer.ejs') %>